<input id="dark-toggle" type="checkbox" title="dark mode" checked>

<style>
#dark-toggle{
    position: relative;
  overflow: visible;
  appearance: none;
  -webkit-appearance: none;
  display: inline-block;
  width: 50px;
  height: 50px;
  padding: 0;
  margin: 0 .5em;
  background: none;
  border: none;
  outline: none;
  cursor: pointer;

}
#dark-toggle::after {
    position: absolute;
  
  content: "ðŸŒ™";
  left: 5px;
  top: 0;
  height: 20px;
  width: 20px;
  font-size: 10px !important;
  text-indent: -2px;
  line-height: 22px;
  text-align: center;
  font-family: arial;
  transform: translate(var(--x,0),-50%);

  box-shadow: inset 0 -5px 7px rgba(0,0,0,0.4),inset 0 5px 5px -3px hsla(0,0%,100%,0.4),inset 0 0 0 1px hsla(0,0%,100%,0.3),inset 0 0 2px 1px rgba(0,0,0,0.4),0 1px 3px rgba(0,0,0,0.6);
  border-radius: 50%;
  transition: transform .2s ease;
}
#dark-toggle:checked::after {
  content: "ðŸ”†";
}
</style>

<script>
 const modeToggler = document.querySelector('#dark-toggle') || " ";
 let   deviceTheme = matchMedia('(prefers-color-scheme: dark)');


 function changeColors(mode = " "){
    if(mode.match('dark')){
        document.documentElement.style.setProperty('--main-background-lighter','hsl(208, 79%, 15%)');
        document.documentElement.style.setProperty('--main-background-darker','hsl(221, 39%, 11%)');
        document.documentElement.style.setProperty('--font-color','#fff');
      // maintain checkbox state if function run without clicking it
        modeToggler.checked = true;
    }else{
        document.documentElement.style.setProperty('--main-background-lighter','hsl(28, 100%, 99%)');
        document.documentElement.style.setProperty('--main-background-darker','hsl(28, 100%, 97%)');
        document.documentElement.style.setProperty('--font-color','hsl(28, 100%, 3%)');
        modeToggler.checked = false;
    }
    localStorage.setItem('mode',mode);
 }



 modeToggler.addEventListener('change',()=>{
 modeToggler.checked ? changeColors('dark') :changeColors('light');
 });

 if(localStorage.getItem('mode')){
    //get pervius user prefrence
    changeColors(localStorage.getItem('mode')||'');
  }else{
    //get device defualts
    deviceTheme.matches ? changeColors('dark'):changeColors('light');
  }

  deviceTheme.addEventListener("change", ()=>{
    deviceTheme = matchMedia('(prefers-color-scheme: dark)');
    deviceTheme.matches ? changeColors('dark'):changeColors('light');
  });

// changeColors(localStorage.getItem('mode')|| ' ');
 //event listner for changing device mode
</script>